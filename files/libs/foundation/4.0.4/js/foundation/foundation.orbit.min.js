(function(e,t,n,i){"use strict";Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={version:"4.0.0",settings:{timer_speed:1e4,animation_speed:500,bullets:!0,stack_on_small:!0,container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning"},init:function(t,n){var i=this;"object"==typeof n&&e.extend(!0,i.settings,n),e("[data-orbit]",t).each(e.proxy(i._init,i))},_container_html:function(){var e=this;return'<div class="'+e.settings.container_class+'"></div>'},_bullets_container_html:function(t){var n=this,i=e('<ol class="'+n.settings.bullets_container_class+'"></ol>');return t.each(function(t){var r=e('<li data-orbit-slide-number="'+(t+1)+'" class=""></li>');0===t&&r.addClass(n.settings.bullets_active_class),i.append(r)}),i},_slide_number_html:function(t,n){var i=this,r=e('<div class="'+i.settings.slide_number_class+'"></div>');return r.append("<span>"+t+"</span> of <span>"+n+"</span>"),r},_timer_html:function(){var e=this;return"number"==typeof e.settings.timer_speed&&e.settings.timer_speed>0?'<div class="'+e.settings.timer_container_class+'"><span></span><div class="'+e.settings.timer_progress_class+'"></div></div>':""},_next_html:function(){var e=this;return'<a href="#" class="'+e.settings.next_class+'">Next <span></span></a>'},_prev_html:function(){var e=this;return'<a href="#" class="'+e.settings.prev_class+'">Prev <span></span></a>'},_init:function(t,n){var i=this,r=e(n),o=r.wrap(i._container_html()).parent(),a=r.children();o.append(i._prev_html()),o.append(i._next_html()),r.addClass(i.settings.slides_container_class),i.settings.stack_on_small&&o.addClass(i.settings.stack_on_small_class),o.append(i._slide_number_html(1,a.length)),o.append(i._timer_html()),i.settings.bullets&&o.after(i._bullets_container_html(a)),r.append(a.first().clone().attr("data-orbit-slide","")),r.prepend(a.last().clone().attr("data-orbit-slide","")),r.css("marginLeft","-100%"),a.first().addClass(i.settings.active_slide_class),i._init_events(r),i._init_dimensions(r),i._start_timer(r)},_init_events:function(r){var o=this,a=r.parent();e(t).on("load.fndtn.orbit",function(){r.height(""),r.height(r.height(a.height())),r.trigger("orbit:ready")}).on("resize.fndtn.orbit",function(){r.height(""),r.height(r.height(a.height()))}),e(n).on("click.fndtn.orbit","[data-orbit-link]",function(t){t.preventDefault();var n=e(t.currentTarget).attr("data-orbit-link"),i=r.find("[data-orbit-slide="+n+"]").first();1===i.length&&(o._reset_timer(r,!0),o.goto(r,i.index(),function(){}))}),a.siblings("."+o.settings.bullets_container_class).on("click.fndtn.orbit","[data-orbit-slide-number]",function(t){t.preventDefault(),o._reset_timer(r,!0),o.goto(r,e(t.currentTarget).data("orbit-slide-number"),function(){})}),a.on("orbit:after-slide-change.fndtn.orbit",function(e,t){var n=a.find("."+o.settings.slide_number_class);1===n.length&&n.replaceWith(o._slide_number_html(t.slide_number,t.total_slides))}).on("orbit:next-slide.fndtn.orbit click.fndtn.orbit","."+o.settings.next_class,function(e){e.preventDefault(),o._reset_timer(r,!0),o.goto(r,"next",function(){})}).on("orbit:prev-slide.fndtn.orbit click.fndtn.orbit","."+o.settings.prev_class,function(e){e.preventDefault(),o._reset_timer(r,!0),o.goto(r,"prev",function(){})}).on("orbit:toggle-play-pause.fndtn.orbit click.fndtn.orbit touchstart.fndtn.orbit","."+o.settings.timer_container_class,function(t){t.preventDefault();var n=e(t.currentTarget).toggleClass(o.settings.timer_paused_class),i=n.closest("."+o.settings.container_class).find("."+o.settings.slides_container_class);n.hasClass(o.settings.timer_paused_class)?o._stop_timer(i):o._start_timer(i)}).on("touchstart.fndtn.orbit",function(e){var t={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:i};a.data("swipe-transition",t),e.stopPropagation()}).on("touchmove.fndtn.orbit",function(e){if(!(e.touches.length>1||e.scale&&1!==e.scale)){var t=a.data("swipe-transition");if(t===i&&(t={}),t.delta_x=e.touches[0].pageX-t.start_page_x,t.is_scrolling===i&&(t.is_scrolling=!!(t.is_scrolling||Math.abs(t.delta_x)<Math.abs(e.touches[0].pageY-t.start_page_y))),!t.is_scrolling&&!t.active){e.preventDefault(),o._stop_timer(r);var n=0>t.delta_x?"next":"prev";t.active=!0,o.goto(r,n,function(){})}}}).on("touchend.fndtn.orbit",function(e){a.data("swipe-transition",{}),e.stopPropagation()})},_init_dimensions:function(e){var t=e.parent(),n=e.children();e.css("width",100*n.length+"%"),n.css("width",100/n.length+"%"),e.height(t.height()),e.css("width",100*n.length+"%")},_start_timer:function(e){var t=this,n=e.parent(),i=function(){t._reset_timer(e,!1),t.goto(e,"next",function(){t._start_timer(e)})},r=n.find("."+t.settings.timer_container_class),o=r.find("."+t.settings.timer_progress_class),a=o.width()/r.width(),s=t.settings.timer_speed-a*t.settings.timer_speed;o.animate({width:"100%"},s,"linear",i).data("is-original","beans?"),e.trigger("orbit:timer-started")},_stop_timer:function(e){var t=this,n=e.parent(),i=n.find("."+t.settings.timer_container_class),r=i.find("."+t.settings.timer_progress_class),o=r.width()/i.width();t._rebuild_timer(n,100*o+"%"),e.trigger("orbit:timer-stopped"),i=n.find("."+t.settings.timer_container_class),i.addClass(t.settings.timer_paused_class)},_reset_timer:function(e,t){var n=this,i=e.parent();if(n._rebuild_timer(i,"0%"),"boolean"==typeof t&&t){var r=i.find("."+n.settings.timer_container_class);r.addClass(n.settings.timer_paused_class)}},_rebuild_timer:function(t,n){var i=this,r=t.find("."+i.settings.timer_container_class),o=e(i._timer_html()),a=o.find("."+i.settings.timer_progress_class);if("function"==typeof Zepto)r.remove(),t.append(o),a.css("width",n);else if("function"==typeof jQuery){var s=r.find("."+i.settings.timer_progress_class);s.css("width",n),s.stop()}},"goto":function(t,n,i){var r=this,o=t.parent(),a=t.children(),s=t.find("."+r.settings.active_slide_class),l=s.index();if(o.hasClass(r.settings.orbit_transition_class))return!1;"prev"===n?0===l?l=a.length-1:l--:"next"===n?l=(l+1)%a.length:"number"==typeof n&&(l=n%a.length),l===a.length-1&&"next"===n?(t.css("marginLeft","0%"),l=1):0===l&&"prev"===n&&(t.css("marginLeft","-"+100*(a.length-1)+"%"),l=a.length-2),o.addClass(r.settings.orbit_transition_class),s.removeClass(r.settings.active_slide_class),e(a[l]).addClass(r.settings.active_slide_class);var c=o.siblings("."+r.settings.bullets_container_class);1===c.length&&(c.children().removeClass(r.settings.bullets_active_class),e(c.children()[l-1]).addClass(r.settings.bullets_active_class));var u="-"+100*l+"%";t.trigger("orbit:before-slide-change"),t.css("marginLeft")===u?(o.removeClass(r.settings.orbit_transition_class),t.trigger("orbit:after-slide-change",[{slide_number:l,total_slides:t.children().length-2}]),i()):t.animate({marginLeft:u},r.settings.animation_speed,"linear",function(){o.removeClass(r.settings.orbit_transition_class),t.trigger("orbit:after-slide-change",[{slide_number:l,total_slides:t.children().length-2}]),i()})}}})(Foundation.zj,this,this.document);