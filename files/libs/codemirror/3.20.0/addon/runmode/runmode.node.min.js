/* Just enough of CodeMirror to run runMode under node.js */function splitLines(e){return e.split(/\r?\n|\r/)}function StringStream(e){this.pos=this.start=0,this.string=e}StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||null},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.start},indentation:function(){return 0},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},exports.StringStream=StringStream,exports.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};var modes=exports.modes={},mimeModes=exports.mimeModes={};exports.defineMode=function(e,t){if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}modes[e]=t},exports.defineMIME=function(e,t){mimeModes[e]=t},exports.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),exports.defineMIME("text/plain","null"),exports.getMode=function(e,t){typeof t=="string"&&mimeModes.hasOwnProperty(t)&&(t=mimeModes[t]);if(typeof t=="string")var n=t,r={};else if(t!=null)var n=t.name,r=t;var i=modes[n];if(!i)throw new Error("Unknown mode: "+t);return i(e,r||{})},exports.runMode=function(e,t,n){var r=exports.getMode({indentUnit:2},t),i=splitLines(e),s=exports.startState(r);for(var o=0,u=i.length;o<u;++o){o&&n("\n");var a=new exports.StringStream(i[o]);while(!a.eol()){var f=r.token(a,s);n(a.current(),f,o,a.start,s),a.start=a.pos}}};