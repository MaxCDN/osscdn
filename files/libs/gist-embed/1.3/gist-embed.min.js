!function(a){a(function(){function b(a){for(var b=[],c=a.split(","),d=0;d<c.length;d++){var e=c[d].split("-");if(2===e.length)for(var f=parseInt(e[0],10);f<=e[1];f++)b.push(f);else 1===e.length&&b.push(parseInt(e[0],10))}return b}a("code[data-gist-id]").each(function(){var d,e,f,g,h,i,c=a(this),j={};return c.css("display","block"),d=c.attr("data-gist-id")||"",f=c.attr("data-gist-file"),h="true"===c.attr("data-gist-hide-footer"),i="true"===c.attr("data-gist-hide-line-numbers"),g=c.attr("data-gist-line")||"",g=g.replace(/ /g,""),f&&(j.file=f),d?isNaN(parseInt(d,10))?(c.html("Failed loading gist with incorrect id format: "+d),!1):(e="https://gist.github.com/"+d+".json",c.html("Loading gist "+e+(j.file?", file: "+j.file:"")+"..."),a.ajax({url:e,data:j,dataType:"jsonp",timeout:1e4,success:function(d){var f,j,k;d&&d.div?(d.stylesheet&&0!==d.stylesheet.indexOf("http")&&(0!==d.stylesheet.indexOf("/")&&(d.stylesheet="/"+d.stylesheet),d.stylesheet="https://gist.github.com"+d.stylesheet),d.stylesheet&&0===a('link[href="'+d.stylesheet+'"]').length&&(f=document.createElement("link"),head=document.getElementsByTagName("head")[0],f.type="text/css",f.rel="stylesheet",f.href=d.stylesheet,head.insertBefore(f,head.firstChild)),k=a(d.div),k.removeAttr("id"),c.html("").append(k),g&&(j=b(g),k.find(".line").each(function(b){-1===a.inArray(b+1,j)&&a(this).remove()}),k.find(".line-number").each(function(b){-1===a.inArray(b+1,j)&&a(this).remove()})),h&&k.find(".gist-meta").remove(),i&&k.find(".line-numbers").remove()):c.html("Failed loading gist "+e)},error:function(){c.html("Failed loading gist "+e)}}),void 0):!1})})}(jQuery);
